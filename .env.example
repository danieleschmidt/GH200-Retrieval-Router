# GH200-Retrieval-Router Environment Configuration
# Copy this file to .env and customize for your environment

# =================================
# Environment Configuration
# =================================
NODE_ENV=production
LOG_LEVEL=info

# =================================
# Grace Hopper Configuration
# =================================
# Set to true for development without Grace Hopper hardware
MOCK_GRACE_HOPPER=false

# Grace Memory Configuration
GRACE_MEMORY_SIZE=480GB
GRACE_MEMORY_POOLS_EMBEDDINGS=300GB
GRACE_MEMORY_POOLS_CACHE=100GB
GRACE_MEMORY_POOLS_WORKSPACE=80GB
UNIFIED_MEMORY_ENABLED=true
ZERO_COPY_ENABLED=true

# NVLink Configuration
NVLINK_BANDWIDTH=900
NVLINK_RINGS=4
NVLINK_ALGORITHM=RING,TREE
NVLINK_ENCRYPTION=true

# =================================
# Server Configuration
# =================================
PORT=8080
HOST=0.0.0.0
MAX_CONNECTIONS=1000
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000
MAX_REQUEST_SIZE=100mb

# =================================
# Database Configuration
# =================================
# Redis for caching
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_MEMORY=10GB

# PostgreSQL for metadata
POSTGRES_URL=postgresql://username:password@localhost:5432/gh200_router
POSTGRES_POOL_SIZE=20
POSTGRES_IDLE_TIMEOUT=30000

# Vector Database Configuration
VECTOR_DB_TYPE=faiss
VECTOR_DIMENSIONS=1536
VECTOR_SIMILARITY_METRIC=cosine
VECTOR_COMPRESSION=pq

# =================================
# Security Configuration
# =================================
# Authentication
JWT_SECRET=your-256-bit-secret-key-change-this-in-production
JWT_EXPIRES_IN=24h
API_KEY_REQUIRED=false
API_KEY=your-api-key-here

# Encryption
ENCRYPTION_KEY=your-aes-256-encryption-key
ENCRYPT_DATA_AT_REST=true
ENCRYPT_GRACE_MEMORY=true

# TLS Configuration
TLS_ENABLED=false
TLS_CERT_PATH=/path/to/cert.pem
TLS_KEY_PATH=/path/to/key.pem
TLS_CA_PATH=/path/to/ca.pem

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_WINDOW_MS=60000

# =================================
# Performance Configuration
# =================================
# Memory Management
MAX_MEMORY_POOL_GB=400
MAX_CACHE_SIZE=1000000
CACHE_TTL=3600000
GARBAGE_COLLECTION_THRESHOLD=0.85

# Concurrency
MAX_WORKERS=16
BATCH_SIZE=512
PREFETCH_FACTOR=4
NUM_RETRIEVAL_WORKERS=16

# Performance Targets
TARGET_LATENCY_MS=50
TARGET_THROUGHPUT_QPS=125000
TARGET_MEMORY_EFFICIENCY=0.85

# =================================
# Monitoring Configuration
# =================================
# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_INTERVAL=10000
COLLECT_GRACE_METRICS=true
COLLECT_NVLINK_METRICS=true

# Tracing
TRACING_ENABLED=true
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6832
JAEGER_ENDPOINT=http://localhost:14268/api/traces
TRACE_SAMPLE_RATE=0.1

# Health Checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_MEMORY_THRESHOLD=90
HEALTH_DISK_THRESHOLD=85
HEALTH_RESPONSE_TIME_THRESHOLD=1000

# =================================
# Embedding Configuration
# =================================
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_BATCH_SIZE=32
EMBEDDING_CACHE_ENABLED=true
EMBEDDING_NORMALIZE=true
EMBEDDING_USE_GPU=true

# =================================
# Sharding Configuration
# =================================
SHARDING_STRATEGY=SEMANTIC_CLUSTERING
SHARD_COUNT=32
MIN_SHARD_SIZE_GB=100
MAX_SHARD_SIZE_GB=800
REPLICATION_FACTOR=2
AUTO_BALANCE_ENABLED=true
REBALANCE_INTERVAL=3600000

# =================================
# Load Balancing Configuration
# =================================
LOAD_BALANCING_STRATEGY=ADAPTIVE
HEALTH_CHECK_INTERVAL=5000
MAX_RETRIES=3
LATENCY_THRESHOLD=100
CPU_THRESHOLD=80
MEMORY_THRESHOLD=90

# =================================
# Feature Flags
# =================================
ENABLE_HYBRID_SEARCH=true
ENABLE_SEMANTIC_ROUTING=true
ENABLE_ADAPTIVE_SHARDING=true
ENABLE_CONTINUOUS_LEARNING=false
ENABLE_FEDERATED_RETRIEVAL=false
ENABLE_QUANTIZED_INDICES=false
ENABLE_DYNAMIC_COMPRESSION=false
ENABLE_PREDICTIVE_PREFETCHING=false

# =================================
# Development Configuration
# =================================
# Only used in development/testing
ENABLE_PROFILING=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_BENCHMARKING=false
SYNTHETIC_LOAD_ENABLED=false
BENCHMARK_MODE=false

# =================================
# Logging Configuration
# =================================
LOG_FORMAT=json
LOG_QUERIES=true
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=1000
LOG_MAX_FILE_SIZE=100mb
LOG_MAX_FILES=10

# =================================
# External Services
# =================================
# S3 for backup/storage
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-west-2
S3_BUCKET=gh200-router-data

# Notification Services
SLACK_WEBHOOK_URL=
EMAIL_SMTP_HOST=
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=
EMAIL_SMTP_PASS=

# =================================
# Cluster Configuration
# =================================
# Multi-node setup
CLUSTER_ENABLED=false
CLUSTER_NODE_ID=1
CLUSTER_NODES=localhost:8080
CLUSTER_DISCOVERY_SERVICE=

# Kubernetes
KUBERNETES_NAMESPACE=default
KUBERNETES_SERVICE_NAME=gh200-router
KUBERNETES_POD_IP=

# =================================
# Backup Configuration
# =================================
BACKUP_ENABLED=false
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/data/backups
BACKUP_COMPRESSION=true

# =================================
# Compliance Configuration
# =================================
AUDIT_LOGGING_ENABLED=true
DATA_RETENTION_DAYS=365
GDPR_COMPLIANCE_ENABLED=false
SOC2_COMPLIANCE_ENABLED=false

# =================================
# Testing Configuration
# =================================
# Only used during testing
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/gh200_router_test
TEST_REDIS_URL=redis://localhost:6380
TEST_DATA_PATH=/tmp/gh200-test-data
TEST_VECTOR_COUNT=1000
TEST_PARALLEL_WORKERS=4
